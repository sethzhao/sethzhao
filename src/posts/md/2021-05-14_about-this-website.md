# 为什么做这个网站
既然是 Web 开发者，那有个自己的网站也是理所当然的吧。以前也弄过好几次，但往往不能坚持写作，毕竟没人看，得不到正向反馈就很缺动力。  
这次选择不用现成博客系统，完全自己开发，至少折腾的乐趣是有了，可以把玩各种新技术。今后也想多参与开源项目，多做一点 Side Project 。有什么收获和成果的话，可以在这里分享。  
最主要还是最近比较有时间。

# 用了什么技术栈
个人项目当然是要尝尝鲜，所以用了 Vue3 ，并且用实验性语法 script-setup ，可以说有了这个才能和 React Hooks 比比简洁度，但是还是有几点想吐槽的。

- 依然存在生命周期函数。我认为 Hooks 一大好处就是不用再写生命周期函数了，但 Vue 的 Composition API 还是需要，只是换了一种形式。
- 顶级变量自动能在 template 使用。本身是件好事，能少写很多样板代码，但其实比较迷惑，不像 Hooks 的变量能在 jsx 里用是因为在一个作用域里那样自然。并且编辑器也许会报 unused 或者 never read ？
- 失去 this ， 大量原有写法的改变。学习成本提高了，要看很多文档。

Vue 和 React 本质上的不同决定了受 React Hooks 启发的 Composition API 也不会与它完全一致。但至少，像 Capture Value 这种坑也不会遗传到吧。  
对于 Vue3 和 Composition API ，我还在初体验阶段，有待深入理解，但感觉是回不去了。

# 博客的实现方式
考虑过用富文本编辑器，做一套CRUD接口，但那也太麻烦了吧。否决。  
那就像静态博客生成器一样用 Markdown 写吧，而且所有文章都在一个项目里，就显得非常内聚了。  

## 如何实现
我目前的做法是用一个 JSON 记录文章的标题和对应的 md 文件名。同时 md 的文件名按照约定定义，由发布时间和将作为 URL 一部分的 friendly URL 组成。  
JSON 就像这样：
```
[
  {
    "title": "关于这个网站",
    "content": "2021-05-14_about-this-website"
  }
]
```
按照约定定义的文件名本身就携带发布日期和 URL 信息，省去了繁琐的配置。文章列表页面读取这个 JSON ，拆分 md 文件名，用于显示文章列表。文章内容就由 markdown-loader 将 Markdown 内容转义成 HTML 来展示。  

## 还是有些繁琐
来缕一缕我们写一篇新文章需要做的事：
1. 创建一个 md 文件，按照约定命名，要写发布日期，并想一个好的友好 URL ，一般是标题对应的英文。
2. 改动 JSON ，增加一段文章配置，与 md 文件名一致。

好像还是有些繁琐？

于是我写了一个脚本，交互式的引导输入文章标题、友好的URL（默认百度翻译），发布日期（默认当天），帮助我完成以上步骤，剩下只要开始写文章就行了。

执行命令：
```
npm run new-post
```
或者
```
yarn run new-post
```

简单多了，至于修改和删除之类的就手动编辑吧。

# 如何部署
应该不会写什么反动的内容，所以用的是阿里云上海的服务器。备案意外的只用了 1 天，时代果然是进步了。  
用 Github Actions 做的自动部署，很好用。

# 源码分享
如果有人对源码感兴趣的话，可以移步 Github。[链接](https://github.com/slertness/setzhao)

# 最后
本站受到 [Randy's Blog](https://lutaonan.com/) 的启发，他是一位我很欣赏的开发者。